# HÆ¯á»šNG DáºªN TEST TÃNH NÄ‚NG DRAFT CART (ÄÆ N NHÃP)

## Tá»•ng quan

TÃ­nh nÄƒng Draft Cart cho phÃ©p báº¡n táº¡o vÃ  quáº£n lÃ½ nhiá»u Ä‘Æ¡n hÃ ng Ä‘ang chá» xá»­ lÃ½ cÃ¹ng lÃºc. Khi khÃ¡ch hÃ ng thá»© 2 tá»›i trong khi báº¡n Ä‘ang táº¡o Ä‘Æ¡n cho khÃ¡ch hÃ ng thá»© nháº¥t, báº¡n khÃ´ng cáº§n há»§y Ä‘Æ¡n hiá»‡n táº¡i.

---

## Ká»‹ch báº£n Test

### Test 1: Táº¡o Ä‘Æ¡n nhÃ¡p Ä‘áº§u tiÃªn

**BÆ°á»›c thá»±c hiá»‡n:**
1. Má»Ÿ á»©ng dá»¥ng vÃ  Ä‘Äƒng nháº­p
2. Click vÃ o "Táº¡o Ä‘Æ¡n hÃ ng"
3. Chá»n khÃ¡ch hÃ ng A tá»« danh sÃ¡ch
4. ThÃªm 2-3 sáº£n pháº©m vÃ o giá» hÃ ng
5. Quan sÃ¡t panel Draft Cart xuáº¥t hiá»‡n á»Ÿ trÃªn cÃ¹ng

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Panel Draft Cart hiá»ƒn thá»‹ vá»›i 1 card
- âœ… Card hiá»ƒn thá»‹: TÃªn khÃ¡ch hÃ ng, sá»‘ lÆ°á»£ng SP, tá»•ng tiá»n, thá»i gian
- âœ… Card cÃ³ viá»n Ä‘áº­m (lÃ  draft Ä‘ang active)
- âœ… NÃºt "+ ThÃªm má»›i" hiá»ƒn thá»‹ bÃªn cáº¡nh

---

### Test 2: ThÃªm Ä‘Æ¡n nhÃ¡p thá»© 2

**BÆ°á»›c thá»±c hiá»‡n:**
1. Trong khi Ä‘ang cÃ³ Ä‘Æ¡n cá»§a khÃ¡ch A (tá»« Test 1)
2. Click nÃºt "+ ThÃªm má»›i" á»Ÿ panel Draft Cart
3. Chá»n khÃ¡ch hÃ ng B
4. ThÃªm 1-2 sáº£n pháº©m khÃ¡c vÃ o giá»
5. Kiá»ƒm tra panel Draft Cart

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Panel hiá»ƒn thá»‹ 2 cards (khÃ¡ch A vÃ  khÃ¡ch B)
- âœ… Card cá»§a khÃ¡ch B cÃ³ viá»n Ä‘áº­m (Ä‘ang active)
- âœ… Card cá»§a khÃ¡ch A váº«n cÃ²n vá»›i Ä‘áº§y Ä‘á»§ thÃ´ng tin
- âœ… Giá» hÃ ng hiá»ƒn thá»‹ sáº£n pháº©m cá»§a khÃ¡ch B

---

### Test 3: Chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c Ä‘Æ¡n nhÃ¡p

**BÆ°á»›c thá»±c hiá»‡n:**
1. CÃ³ 2 Ä‘Æ¡n nhÃ¡p (khÃ¡ch A vÃ  B) tá»« Test 2
2. Click vÃ o card cá»§a khÃ¡ch A
3. Kiá»ƒm tra giá» hÃ ng
4. Click vÃ o card cá»§a khÃ¡ch B
5. Kiá»ƒm tra giá» hÃ ng láº¡i

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Khi click card khÃ¡ch A:
  - Viá»n card A Ä‘áº­m lÃªn (active)
  - Giá» hÃ ng hiá»ƒn thá»‹ sáº£n pháº©m cá»§a khÃ¡ch A
  - ThÃ´ng tin khÃ¡ch á»Ÿ sticky bar lÃ  khÃ¡ch A
- âœ… Khi click card khÃ¡ch B:
  - Viá»n card B Ä‘áº­m lÃªn
  - Giá» hÃ ng hiá»ƒn thá»‹ sáº£n pháº©m cá»§a khÃ¡ch B
  - ThÃ´ng tin khÃ¡ch chuyá»ƒn sang khÃ¡ch B
- âœ… ThÃ´ng bÃ¡o "ÄÃ£ chuyá»ƒn sang [tÃªn khÃ¡ch]" hiá»ƒn thá»‹

---

### Test 4: Sá»­a Ä‘á»•i sáº£n pháº©m trong Ä‘Æ¡n nhÃ¡p

**BÆ°á»›c thá»±c hiá»‡n:**
1. Chá»n Ä‘Æ¡n cá»§a khÃ¡ch A (cÃ³ 2-3 sáº£n pháº©m)
2. Thay Ä‘á»•i sá»‘ lÆ°á»£ng sáº£n pháº©m thá»© nháº¥t
3. ThÃªm 1 sáº£n pháº©m má»›i
4. Chuyá»ƒn sang Ä‘Æ¡n cá»§a khÃ¡ch B
5. Chuyá»ƒn láº¡i Ä‘Æ¡n cá»§a khÃ¡ch A
6. Kiá»ƒm tra giá» hÃ ng

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Táº¥t cáº£ thay Ä‘á»•i Ä‘Æ°á»£c lÆ°u láº¡i
- âœ… Sá»‘ lÆ°á»£ng Ä‘Ã£ thay Ä‘á»•i váº«n giá»¯ nguyÃªn
- âœ… Sáº£n pháº©m má»›i váº«n cÃ²n trong giá»
- âœ… Tá»•ng tiá»n trÃªn card cáº­p nháº­t chÃ­nh xÃ¡c
- âœ… Sá»‘ lÆ°á»£ng SP trÃªn card cáº­p nháº­t

---

### Test 5: XÃ³a Ä‘Æ¡n nhÃ¡p

**BÆ°á»›c thá»±c hiá»‡n:**
1. CÃ³ Ã­t nháº¥t 2 Ä‘Æ¡n nhÃ¡p
2. Hover vÃ o nÃºt X trÃªn card Ä‘Æ¡n nhÃ¡p (khÃ´ng pháº£i Ä‘Æ¡n Ä‘ang active)
3. Click nÃºt X
4. XÃ¡c nháº­n xÃ³a (náº¿u cÃ³ dialog)
5. Kiá»ƒm tra panel

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Dialog xÃ¡c nháº­n hiá»ƒn thá»‹ vá»›i thÃ´ng tin: "XÃ³a Ä‘Æ¡n cá»§a [tÃªn khÃ¡ch]? (X sáº£n pháº©m)"
- âœ… Sau khi xÃ¡c nháº­n:
  - ÄÆ¡n nhÃ¡p bá»‹ xÃ³a khá»i panel
  - ÄÆ¡n active khÃ´ng Ä‘á»•i
  - Giá» hÃ ng khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng
- âœ… ThÃ´ng bÃ¡o "ÄÃ£ xÃ³a Ä‘Æ¡n nhÃ¡p" hiá»ƒn thá»‹

---

### Test 6: XÃ³a Ä‘Æ¡n nhÃ¡p Ä‘ang active

**BÆ°á»›c thá»±c hiá»‡n:**
1. CÃ³ 3 Ä‘Æ¡n nhÃ¡p: A, B, C
2. Äang active Ä‘Æ¡n B
3. Click nÃºt X trÃªn card Ä‘Æ¡n B
4. XÃ¡c nháº­n xÃ³a

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Dialog xÃ¡c nháº­n hiá»ƒn thá»‹
- âœ… Sau khi xÃ³a:
  - ÄÆ¡n B biáº¿n máº¥t
  - Tá»± Ä‘á»™ng chuyá»ƒn sang Ä‘Æ¡n A hoáº·c C
  - Giá» hÃ ng hiá»ƒn thá»‹ sáº£n pháº©m cá»§a Ä‘Æ¡n má»›i
  - ThÃ´ng tin khÃ¡ch cáº­p nháº­t

---

### Test 7: HoÃ n táº¥t Ä‘Æ¡n hÃ ng (Táº¡o Ä‘Æ¡n)

**BÆ°á»›c thá»±c hiá»‡n:**
1. CÃ³ 3 Ä‘Æ¡n nhÃ¡p: A, B, C
2. Chá»n Ä‘Æ¡n B (lÃ m active)
3. Click nÃºt "Táº¡o Ä‘Æ¡n"
4. Äá»£i Ä‘Æ¡n Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng
5. Kiá»ƒm tra panel Draft Cart

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… ÄÆ¡n hÃ ng Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng
- âœ… ThÃ´ng bÃ¡o "Táº¡o Ä‘Æ¡n hÃ ng thÃ nh cÃ´ng!"
- âœ… ÄÆ¡n B biáº¿n máº¥t khá»i panel
- âœ… Tá»± Ä‘á»™ng chuyá»ƒn sang Ä‘Æ¡n A hoáº·c C
- âœ… Giá» hÃ ng hiá»ƒn thá»‹ sáº£n pháº©m cá»§a Ä‘Æ¡n tiáº¿p theo
- âœ… Náº¿u chá»‰ cÃ²n 1 Ä‘Æ¡n vÃ  táº¡o xong â†’ Quay vá» tráº¡ng thÃ¡i trá»‘ng

---

### Test 8: Refresh trang (LocalStorage persistence)

**BÆ°á»›c thá»±c hiá»‡n:**
1. Táº¡o 2-3 Ä‘Æ¡n nhÃ¡p vá»›i sáº£n pháº©m khÃ¡c nhau
2. Ghi nhá»› sá»‘ lÆ°á»£ng Ä‘Æ¡n, tÃªn khÃ¡ch, sá»‘ sáº£n pháº©m
3. Refresh trang (F5 hoáº·c Cmd+R)
4. Quay láº¡i trang "Táº¡o Ä‘Æ¡n hÃ ng"
5. Kiá»ƒm tra panel Draft Cart

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Táº¥t cáº£ Ä‘Æ¡n nhÃ¡p Ä‘Æ°á»£c khÃ´i phá»¥c
- âœ… Sá»‘ lÆ°á»£ng Ä‘Æ¡n giá»‘ng nhÆ° trÆ°á»›c
- âœ… TÃªn khÃ¡ch, sá»‘ sáº£n pháº©m, tá»•ng tiá»n chÃ­nh xÃ¡c
- âœ… ÄÆ¡n active trÆ°á»›c khi refresh váº«n active
- âœ… Giá» hÃ ng hiá»ƒn thá»‹ Ä‘Ãºng sáº£n pháº©m

---

### Test 9: XÃ³a táº¥t cáº£ (Clear Cart)

**BÆ°á»›c thá»±c hiá»‡n:**
1. CÃ³ 1 Ä‘Æ¡n nhÃ¡p vá»›i 3 sáº£n pháº©m
2. Click nÃºt "XÃ³a táº¥t cáº£" á»Ÿ gÃ³c trÃªn bÃªn pháº£i
3. Kiá»ƒm tra panel vÃ  giá» hÃ ng

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Dialog xÃ¡c nháº­n xÃ³a Ä‘Æ¡n hiá»ƒn thá»‹
- âœ… Sau khi xÃ¡c nháº­n:
  - ÄÆ¡n nhÃ¡p bá»‹ xÃ³a khá»i panel
  - Giá» hÃ ng trá»‘ng
  - Panel Draft Cart biáº¿n máº¥t (vÃ¬ khÃ´ng cÃ²n Ä‘Æ¡n nÃ o)
  - Customer selector hiá»ƒn thá»‹ láº¡i

---

### Test 10: Táº¡o nhiá»u Ä‘Æ¡n nhÃ¡p (Giá»›i háº¡n 10)

**BÆ°á»›c thá»±c hiá»‡n:**
1. Táº¡o 10 Ä‘Æ¡n nhÃ¡p khÃ¡c nhau
2. Thá»­ táº¡o Ä‘Æ¡n nhÃ¡p thá»© 11
3. Kiá»ƒm tra nÃºt "+ ThÃªm má»›i"

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Panel hiá»ƒn thá»‹ 10 cards Ä‘Æ¡n nhÃ¡p
- âœ… NÃºt "+ ThÃªm má»›i" biáº¿n máº¥t khi Ä‘á»§ 10 Ä‘Æ¡n
- âœ… CÃ³ thá»ƒ scroll ngang Ä‘á»ƒ xem táº¥t cáº£ 10 Ä‘Æ¡n
- âœ… Váº«n chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c Ä‘Æ¡n bÃ¬nh thÆ°á»ng

---

### Test 11: Invoice Mode (Cháº¿ Ä‘á»™ HÃ³a Ä‘Æ¡n)

**BÆ°á»›c thá»±c hiá»‡n:**
1. Táº¡o 2 Ä‘Æ¡n nhÃ¡p á»Ÿ Real Mode
2. Chuyá»ƒn sang Invoice Mode (toggle á»Ÿ header)
3. Kiá»ƒm tra panel Draft Cart
4. Táº¡o 1 Ä‘Æ¡n nhÃ¡p má»›i á»Ÿ Invoice Mode
5. Chuyá»ƒn láº¡i Real Mode

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Panel Draft Cart á»Ÿ Real Mode biáº¿n máº¥t khi chuyá»ƒn sang Invoice Mode
- âœ… Panel má»›i hiá»ƒn thá»‹ á»Ÿ Invoice Mode (mÃ u há»“ng/rose)
- âœ… ÄÆ¡n nhÃ¡p Invoice Mode hoÃ n toÃ n Ä‘á»™c láº­p
- âœ… Chuyá»ƒn láº¡i Real Mode â†’ panel Real Mode hiá»ƒn thá»‹ vá»›i 2 Ä‘Æ¡n ban Ä‘áº§u
- âœ… Má»—i mode cÃ³ danh sÃ¡ch Ä‘Æ¡n nhÃ¡p riÃªng

---

### Test 12: Copy Ä‘Æ¡n hÃ ng (khÃ´ng máº¥t Ä‘Æ¡n nhÃ¡p hiá»‡n táº¡i)

**BÆ°á»›c thá»±c hiá»‡n:**
1. Táº¡o 2 Ä‘Æ¡n nhÃ¡p: KhÃ¡ch A (3 sáº£n pháº©m), KhÃ¡ch B (2 sáº£n pháº©m)
2. Táº¡o Ä‘Æ¡n cho KhÃ¡ch A (hoÃ n táº¥t)
3. VÃ o trang "ÄÆ¡n hÃ ng", tÃ¬m Ä‘Æ¡n cá»§a KhÃ¡ch A vá»«a táº¡o
4. Click "Copy Ä‘Æ¡n" trÃªn Ä‘Æ¡n cá»§a KhÃ¡ch A
5. Quay láº¡i trang "Táº¡o Ä‘Æ¡n hÃ ng"
6. Kiá»ƒm tra panel vÃ  giá» hÃ ng

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Panel hiá»ƒn thá»‹ 2 Ä‘Æ¡n nhÃ¡p: KhÃ¡ch B (cÅ©) + KhÃ¡ch A (má»›i copy)
- âœ… ÄÆ¡n nhÃ¡p cá»§a KhÃ¡ch B váº«n cÃ²n nguyÃªn váº¹n vá»›i 2 sáº£n pháº©m
- âœ… ÄÆ¡n nhÃ¡p má»›i (copy tá»« KhÃ¡ch A) cÃ³ 3 sáº£n pháº©m giá»‘ng Ä‘Æ¡n cÅ©
- âœ… ÄÆ¡n nhÃ¡p active lÃ  Ä‘Æ¡n vá»«a copy (KhÃ¡ch A)
- âœ… Giá» hÃ ng hiá»ƒn thá»‹ 3 sáº£n pháº©m cá»§a Ä‘Æ¡n copy
- âœ… Sá»‘ lÆ°á»£ng, giÃ¡, chiáº¿t kháº¥u giá»‘ng Ä‘Æ¡n gá»‘c
- âœ… CÃ³ thá»ƒ chá»‰nh sá»­a Ä‘Æ¡n copy trÆ°á»›c khi táº¡o Ä‘Æ¡n má»›i

---

### Test 13: Thá»i gian hiá»ƒn thá»‹ (Time Display)

**BÆ°á»›c thá»±c hiá»‡n:**
1. Táº¡o Ä‘Æ¡n nhÃ¡p má»›i
2. Kiá»ƒm tra thá»i gian hiá»ƒn thá»‹ dÆ°á»›i card (vÃ­ dá»¥: "Vá»«a xong")
3. Äá»£i 2-3 phÃºt
4. Kiá»ƒm tra láº¡i thá»i gian
5. Refresh trang
6. Kiá»ƒm tra thá»i gian

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… Ngay sau khi táº¡o: "Vá»«a xong"
- âœ… Sau 2-3 phÃºt: "2 phÃºt" hoáº·c "3 phÃºt"
- âœ… Sau refresh: Thá»i gian váº«n chÃ­nh xÃ¡c
- âœ… Sau 1 giá»: "1 giá»"
- âœ… Sau 1 ngÃ y: "1 ngÃ y"

---

### Test 14: Auto-cleanup (Tá»± Ä‘á»™ng dá»n dáº¹p)

**BÆ°á»›c thá»±c hiá»‡n:**
1. Táº¡o 1 Ä‘Æ¡n nhÃ¡p
2. Sá»­ dá»¥ng DevTools Ä‘á»ƒ chá»‰nh sá»­a localStorage:
   ```javascript
   // Má»Ÿ Console trong DevTools
   const drafts = JSON.parse(localStorage.getItem('draftCarts'));
   drafts[0].createdAt = new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(); // 8 ngÃ y trÆ°á»›c
   localStorage.setItem('draftCarts', JSON.stringify(drafts));
   ```
3. Refresh trang
4. Kiá»ƒm tra panel Draft Cart

**Káº¿t quáº£ mong Ä‘á»£i:**
- âœ… ÄÆ¡n nhÃ¡p cÅ© hÆ¡n 7 ngÃ y tá»± Ä‘á»™ng bá»‹ xÃ³a
- âœ… Panel trá»‘ng (khÃ´ng hiá»ƒn thá»‹)
- âœ… KhÃ´ng cÃ³ lá»—i trong console

---

## Checklist tá»•ng quan

### Chá»©c nÄƒng cÆ¡ báº£n
- [ ] Táº¡o Ä‘Æ¡n nhÃ¡p Ä‘áº§u tiÃªn
- [ ] ThÃªm Ä‘Æ¡n nhÃ¡p má»›i
- [ ] Chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c Ä‘Æ¡n nhÃ¡p
- [ ] Sá»­a Ä‘á»•i sáº£n pháº©m trong Ä‘Æ¡n nhÃ¡p
- [ ] XÃ³a Ä‘Æ¡n nhÃ¡p khÃ´ng active
- [ ] XÃ³a Ä‘Æ¡n nhÃ¡p Ä‘ang active
- [ ] HoÃ n táº¥t Ä‘Æ¡n hÃ ng (táº¡o Ä‘Æ¡n)
- [ ] XÃ³a táº¥t cáº£ sáº£n pháº©m

### Persistence & Performance
- [ ] Refresh trang - Ä‘Æ¡n nhÃ¡p Ä‘Æ°á»£c khÃ´i phá»¥c
- [ ] LocalStorage lÆ°u chÃ­nh xÃ¡c
- [ ] Giá»›i háº¡n 10 Ä‘Æ¡n nhÃ¡p
- [ ] Auto-cleanup Ä‘Æ¡n cÅ© hÆ¡n 7 ngÃ y
- [ ] KhÃ´ng lag khi cÃ³ nhiá»u Ä‘Æ¡n nhÃ¡p

### Dual Mode
- [ ] Draft Cart hoáº¡t Ä‘á»™ng á»Ÿ Real Mode
- [ ] Draft Cart hoáº¡t Ä‘á»™ng á»Ÿ Invoice Mode
- [ ] 2 mode cÃ³ danh sÃ¡ch Ä‘Æ¡n nhÃ¡p Ä‘á»™c láº­p
- [ ] Chuyá»ƒn mode khÃ´ng máº¥t Ä‘Æ¡n nhÃ¡p

### Edge Cases
- [ ] Copy Ä‘Æ¡n hÃ ng táº¡o Ä‘Æ¡n nhÃ¡p má»›i
- [ ] Thá»i gian hiá»ƒn thá»‹ chÃ­nh xÃ¡c
- [ ] Tá»•ng tiá»n cáº­p nháº­t khi sá»­a sáº£n pháº©m
- [ ] Sá»‘ lÆ°á»£ng SP cáº­p nháº­t chÃ­nh xÃ¡c
- [ ] Toast notifications hiá»ƒn thá»‹ Ä‘Ãºng

### UI/UX
- [ ] Panel hiá»ƒn thá»‹ Ä‘áº¹p trÃªn desktop
- [ ] Panel hiá»ƒn thá»‹ Ä‘áº¹p trÃªn mobile
- [ ] Scroll ngang hoáº¡t Ä‘á»™ng tá»‘t
- [ ] MÃ u sáº¯c phÃ¹ há»£p vá»›i theme
- [ ] Viá»n active card rÃµ rÃ ng
- [ ] NÃºt X dá»… nháº¥n
- [ ] ThÃ´ng bÃ¡o rÃµ rÃ ng

---

## BÃ¡o lá»—i

Náº¿u phÃ¡t hiá»‡n lá»—i, vui lÃ²ng ghi láº¡i:
1. Ká»‹ch báº£n test Ä‘ang thá»±c hiá»‡n
2. CÃ¡c bÆ°á»›c Ä‘Ã£ lÃ m
3. Káº¿t quáº£ mong Ä‘á»£i
4. Káº¿t quáº£ thá»±c táº¿
5. Screenshot (náº¿u cÃ³)
6. ThÃ´ng bÃ¡o lá»—i trong Console (F12 â†’ Console)

---

## Ghi chÃº ká»¹ thuáº­t

### LocalStorage Keys
- `draftCarts` - Danh sÃ¡ch Ä‘Æ¡n nhÃ¡p Real Mode
- `activeDraftId` - ID Ä‘Æ¡n nhÃ¡p Ä‘ang active (Real Mode)
- `invoiceDraftCarts` - Danh sÃ¡ch Ä‘Æ¡n nhÃ¡p Invoice Mode
- `activeInvoiceDraftId` - ID Ä‘Æ¡n nhÃ¡p Ä‘ang active (Invoice Mode)

### Cáº¥u trÃºc Draft Cart
```javascript
{
  id: "draft_1707654321_abc123",
  customerId: 1,
  customer: { /* customer object */ },
  items: [ /* cart items */ ],
  total: 150000,
  createdAt: "2024-02-01T10:00:00Z",
  updatedAt: "2024-02-01T10:15:00Z"
}
```

---

**ChÃºc báº¡n test tá»‘t! ğŸš€**
